Version: "2012-10-17"
Statement:
  - Action:
      - "iam:PassRole"
    Resource: "*"
    Effect: "Allow"
    Condition:
      StringEqualsIfExists:
        iam:PassedToService:
          - cloudformation.amazonaws.com
          - elasticbeanstalk.amazonaws.com
          - ec2.amazonaws.com
          - s3.amazonaws.com
  - Action:
      - "codedeploy:CreateDeployment"
      - "codedeploy:GetApplicationRevision"
      - "codedeploy:GetDeployment"
      - "codedeploy:GetDeploymentConfig"
      - "codedeploy:RegisterApplicationRevision"
    Resource: "*"
    Effect: "Allow"
  - Action:
      - "cloudformation:CreateStack"
      - "cloudformation:DeleteStack"
      - "cloudformation:DescribeStacks"
      - "cloudformation:UpdateStack"
      - "cloudformation:CreateChangeSet"
      - "cloudformation:DeleteChangeSet"
      - "cloudformation:DescribeChangeSet"
      - "cloudformation:ExecuteChangeSet"
      - "cloudformation:SetStackPolicy"
      - "cloudformation:ValidateTemplate"
      - "iam:PassRole"
    Resource: "*"
    Effect: "Allow"
  - Action:
      - "codebuild:BatchGetBuilds"
      - "codebuild:StartBuild"
      - "codebuild:BatchGetBuildBatches"
      - "codebuild:StartBuildBatch"
    Resource: "*"
    Effect: "Allow"
  - Action:
      - "codestar-connections:UseConnection"
    Resource: "*"
    Effect: "Allow"